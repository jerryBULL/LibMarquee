/**
 * marquee - https://github.com/jerryBULL/LibMarquee
 * version - 1.0.0
 */

(function(){let Marquee=function(a,b){let options={state:"start",startPosition:"start",speed:30,isRepeat:false,};this.el=document.getElementById(a);this.options=Object.assign(options,b);this.intervalList=[];this._CheckObjectInstantiated(a);this._Init();window.marqueeObjectList[a]=this};function Plugin(a,b){if(document.getElementById(a)===null){throw new Error("element isn't found.");}return new Marquee(a,b)}window.marqueeObjectList={};window.marquee=Plugin;window.marquee.Constructor=Marquee;var c=Marquee.prototype;c._Init=function(){this._SetNode();if(this.options.isRepeat){this.el.classList.add("repeat");this._CloneNode()}this._Run()};c._CheckObjectInstantiated=function(a){if(typeof window.marqueeObjectList[a]!=="undefined"){this._ClearObject(window.marqueeObjectList[a])}};c._ClearObject=function(b){let intervalNum=b.intervalList.length;while(intervalNum--){window.clearInterval(b.intervalList[intervalNum]);b.intervalList.pop()}let copyList=b.listBox.querySelectorAll(".copy");copyList.forEach(function(a){a.remove()})};c._SetNode=function(){if(this.el.querySelector(".marquee-list_box")===null){throw new Error(".marquee-list_box isn't found.");}else if(this.el.querySelector(".list_box-list")===null){throw new Error(".list_box-list isn't found.");}this.listBox=this.el.querySelector(".marquee-list_box");this.list=this.el.querySelector(".list_box-list")};c._CloneNode=function(){let listBox=this.listBox;let list=this.list;let copyNum=Math.ceil(listBox.offsetWidth/list.offsetWidth)-1;let childrenNum=list.children.length;while(copyNum--){for(let j=0;j<childrenNum;j++){list.appendChild(list.children[j].cloneNode(true))}}let copyList=list.cloneNode(true);copyList.classList.add("copy");listBox.appendChild(copyList)};c._Run=function(){let $this=this;let listBox=this.listBox;let options=this.options;let setInterval=function(a,b){let nowOffset=options.startPosition==="start"?0:listBox.offsetWidth;if(b){nowOffset=nowOffset+a.offsetWidth}a.style.transform=`translateX(${nowOffset}px)`;interval=window.setInterval(function(){if(typeof a==="undefined"){window.clearInterval(interval);return}if($this.options.state==="stop"){return}let eleWidth=a.offsetWidth;nowOffset--;if(nowOffset<eleWidth*-1){nowOffset=options.isRepeat?a.offsetWidth:listBox.offsetWidth}a.style.transform=`translateX(${nowOffset}px)`},options.speed);$this.intervalList.push(interval)};setInterval(listBox.children[0],false);if(this.options.isRepeat){setInterval(listBox.children[1],true)}};c.Start=function(){this.options.state="start"};c.Stop=function(){this.options.state="stop"}}());